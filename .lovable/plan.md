

# План: Фильтры для ленты публикаций

## Обзор
Добавляем под шапку с историями переключатель-фильтр между тремя типами контента:
- **Все** (смешанная лента) — по умолчанию
- **Публикации** (посты с медиа — фото/видео)
- **Текст** (только текстовые посты без медиа)

Рядом с фильтрами будет минималистичный крестик (X) для сброса в "Все".

## Визуальный дизайн
```text
┌──────────────────────────────────────┐
│  [Все]  [Публикации]  [Текст]   ✕   │
└──────────────────────────────────────┘
```

- Фильтры в виде "chips" (pill-кнопок) в ряд
- Активный фильтр выделен цветом (bg-primary)
- Крестик показывается только когда выбран НЕ "Все"
- Минималистичная иконка X справа

## Технические изменения

### 1. Создание компонента FeedFilters
**Файл:** `src/components/feed/FeedFilters.tsx`

- Три кнопки-фильтра: "Все", "Публикации", "Текст"
- Кнопка сброса (X) справа, появляется только при активном фильтре
- Props: `filter`, `onFilterChange`
- Стилизация: горизонтальный скролл, pill-кнопки с анимацией

### 2. Обновление usePosts хука
**Файл:** `src/hooks/usePosts.tsx`

- Добавить новый тип: `ContentFilter = 'all' | 'media' | 'text'`
- Добавить параметр `contentFilter` в хук
- Фильтрация на клиенте после загрузки:
  - `media` — посты где `media.length > 0`
  - `text` — посты где `media.length === 0`
  - `all` — все посты (без фильтрации)

### 3. Обновление HomePage
**Файл:** `src/pages/HomePage.tsx`

- Добавить state для `contentFilter`
- Импорт и рендер `FeedFilters` под `FeedHeader`
- Передать `filter` и `onFilterChange` в компонент
- Применить клиентскую фильтрацию к постам

## Порядок выполнения
1. Создать `FeedFilters.tsx` с UI фильтров и крестиком сброса
2. Обновить `HomePage.tsx` — добавить state и фильтрацию
3. Применить фильтрацию на уровне рендера (без изменения usePosts для простоты)

## Детали реализации

### FeedFilters компонент
```typescript
const filters = [
  { id: 'all', label: 'Все' },
  { id: 'media', label: 'Публикации' },
  { id: 'text', label: 'Текст' },
];

// Крестик виден только если filter !== 'all'
{filter !== 'all' && (
  <button onClick={() => onFilterChange('all')}>
    <X className="w-4 h-4" />
  </button>
)}
```

### Фильтрация в HomePage
```typescript
const filteredPosts = useMemo(() => {
  if (contentFilter === 'media') {
    return posts.filter(p => (p.media?.length ?? 0) > 0);
  }
  if (contentFilter === 'text') {
    return posts.filter(p => (p.media?.length ?? 0) === 0);
  }
  return posts;
}, [posts, contentFilter]);
```

